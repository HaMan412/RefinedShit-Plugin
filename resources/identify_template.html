<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾ç‰‡è¯†åˆ«ç»“æœ</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: linear-gradient(to bottom right, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85));
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .title {
            font-size: 36px;
            font-weight: 900;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 16px;
            color: #9f7aea;
            font-weight: 700;
        }

        /* åŸå§‹å›¾ç‰‡åŒºåŸŸ */
        .original-image {
            text-align: center;
            margin-bottom: 30px;
        }

        .original-image img {
            max-width: 100%;
            max-height: 400px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 4px solid white;
        }

        .content {
            line-height: 1.8;
            font-size: 18px;
            color: #4a4e69;
            background: rgba(255, 255, 255, 0.6);
            padding: 30px;
            border-radius: 20px;
            border: 2px dashed #b28dff;
            margin-bottom: 30px;
        }

        /* Markdown æ ·å¼ä¼˜åŒ– */
        .content h1,
        .content h2,
        .content h3 {
            color: #22223b;
            margin-top: 20px;
            margin-bottom: 15px;
            font-weight: 900;
        }

        .content h1 {
            font-size: 28px;
            border-bottom: 3px solid #b28dff;
            display: inline-block;
            padding-bottom: 5px;
        }

        .content h2 {
            font-size: 24px;
            color: #667eea;
        }

        .content h3 {
            font-size: 20px;
            color: #764ba2;
        }

        .content p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .content strong {
            color: #e56b6f;
            font-weight: 900;
            padding: 0 4px;
        }

        .content ul,
        .content ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .content li {
            margin-bottom: 8px;
        }

        .content blockquote {
            border-left: 5px solid #b28dff;
            background: #f3e8ff;
            padding: 15px 20px;
            border-radius: 0 15px 15px 0;
            color: #555;
            margin: 20px 0;
        }

        .content code {
            background: transparent;
            color: #667eea;
            padding: 0 4px;
            border-radius: 0;
            font-family: inherit;
            font-size: inherit;
            font-weight: 900;
            border: none;
            box-shadow: none;
        }

        .footer {
            margin-top: 40px;
            text-align: center;
            font-size: 14px;
            color: #b0c4b1;
            font-weight: 600;
            letter-spacing: 1px;
            line-height: 1.6;
        }

        /* éšè—åŸå§‹æ•°æ®å®¹å™¨ */
        #raw-data,
        #image-data,
        #related-images-data {
            display: none;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="title">ğŸ” å›¾ç‰‡è¯†åˆ«ç»“æœ</div>
            <div class="subtitle">âœ¨ ç”± Gemini-2.5-pro è¯†åˆ« âœ¨</div>
        </div>

        <!-- åŸå§‹å›¾ç‰‡ -->
        <div class="original-image" id="original-image-container">
            <!-- å›¾ç‰‡å°†é€šè¿‡ JS æ’å…¥ -->
        </div>

        <!-- éšè—çš„æ•°æ® -->
        <div id="raw-data">{{data.result}}</div>
        <div id="image-data">{{data.imageUrl}}</div>
        <div id="related-images-data">{{data.relatedImages}}</div>

        <!-- è¯†åˆ«ç»“æœ -->
        <div id="content" class="content"></div>

        <div class="footer">
            <div style="margin-bottom: 8px; color: #e8a87c;">AIè¯†åˆ«å†…å®¹ä»…ä¾›å‚è€ƒï¼Œä¸ä¸€å®šå®Œå…¨æ­£ç¡®</div>
            <div>Powered by RefinedShit-Plugin â€¢ â‚ (à¸‡ Ë™Ï‰Ë™)à¸§ â¾</div>
        </div>
    </div>

    <script>
        // è·å–æ•°æ®
        const rawText = document.getElementById('raw-data').innerText;
        const imageUrl = document.getElementById('image-data').innerText;
        const relatedImagesText = document.getElementById('related-images-data').innerText;

        console.log('åŸå§‹æ–‡æœ¬:', rawText);
        console.log('å›¾ç‰‡URL:', imageUrl);

        // æ˜¾ç¤ºåŸå§‹å›¾ç‰‡
        if (imageUrl && imageUrl.trim()) {
            const img = document.createElement('img');
            img.src = imageUrl.trim();
            img.alt = 'åŸå§‹å›¾ç‰‡';
            img.onerror = function () {
                console.error('å›¾ç‰‡åŠ è½½å¤±è´¥:', imageUrl);
                this.style.display = 'none';
            };
            document.getElementById('original-image-container').appendChild(img);
            console.log('åŸå§‹å›¾ç‰‡å·²æ·»åŠ åˆ°DOM');
        } else {
            console.warn('æ²¡æœ‰å›¾ç‰‡URL');
        }

        // æ¸²æŸ“ Markdown ä¸º HTML
        if (rawText && rawText.trim()) {
            try {
                // ä½¿ç”¨ marked æ¸²æŸ“ï¼ˆå¦‚æœå¯ç”¨ï¼‰
                if (typeof marked !== 'undefined' && marked.parse) {
                    marked.setOptions({
                        breaks: true,
                        gfm: true
                    });
                    document.getElementById('content').innerHTML = marked.parse(rawText);
                    console.log('Markdown æ¸²æŸ“æˆåŠŸ (marked)');
                } else {
                    // é™çº§ï¼šç›´æ¥æ˜¾ç¤ºæ–‡æœ¬ï¼Œç®€å•æ›¿æ¢æ¢è¡Œ
                    const formatted = rawText
                        .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
                        .replace(/\n/g, '<br>');
                    document.getElementById('content').innerHTML = formatted;
                    console.log('Markdown æ¸²æŸ“æˆåŠŸ (fallback)');
                }
            } catch (e) {
                console.error('Markdown æ¸²æŸ“å¤±è´¥:', e);
                // å¦‚æœæ¸²æŸ“å¤±è´¥ï¼Œè‡³å°‘æ˜¾ç¤ºåŸå§‹æ–‡æœ¬
                document.getElementById('content').textContent = rawText;
            }
        } else {
            console.warn('æ²¡æœ‰è¯†åˆ«ç»“æœæ–‡æœ¬');
            document.getElementById('content').innerHTML = '<p style="color: #999;">æœªè·å–åˆ°è¯†åˆ«ç»“æœ</p>';
        }
    </script>
</body>

</html>